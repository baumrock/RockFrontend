setTimeout(()=>{let isModal=!!document.querySelector("body.modal");if(isModal)return;let reloading=!1;let redirecttimeout=0;let evtSource;let startStream=function(){let rf=RockFrontend;let url=rf.rootUrl+"?rockfrontend-livereload="+rf.livereloadSecret;evtSource=new EventSource(url,{withCredentials:!0});evtSource.onmessage=function(event){let changed=event.data;if(changed&&!reloading){console.log(changed);if(document.querySelectorAll(".InputfieldStateChanged").length){console.log("detected change - unsaved changes prevent reload");UIkit.notification({message:"Unsaved changes prevent reload",status:"warning",pos:"top-center",timeout:0,});return}
if(document.querySelectorAll("#pw-panel-shade").length){console.log("detected change - open panel prevents reload");UIkit.notification({message:"Open panel prevents reload",status:"warning",pos:"top-center",timeout:0,});return}
console.log("detected change - reloading");reloading=!0;setTimeout(()=>{document.location.reload(!0)},redirecttimeout)}}};startStream();console.log("RockFrontend is listening for file changes...")},1000)